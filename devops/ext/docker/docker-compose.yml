version: "3.4"

services:

  base:
    build:
      dockerfile: Dockerfile.${BASE_DOCKER_VERSION}
      context: base/$OSNAME
      network: ${DOCKER_BUILD_NETWORK:-bridge}
    image: evernym/base:${BASE_DOCKER_VERSION}-${OSNAME}

  rust:
    build:
      dockerfile: Dockerfile.${RUST_DOCKER_VERSION}
      context: rust/$OSNAME
      network: ${DOCKER_BUILD_NETWORK:-bridge}
      args:
          - RUST_VERSION
    image: evernym/rust:${RUST_DOCKER_VERSION}-${OSNAME}

  python3:
    build:
      dockerfile: Dockerfile.${PYTHON3_DOCKER_VERSION}
      context: python3/$OSNAME
      network: ${DOCKER_BUILD_NETWORK:-bridge}
      args:
          - PYTHON3_VERSION
    image: evernym/python3:${PYTHON3_DOCKER_VERSION}-${OSNAME}
